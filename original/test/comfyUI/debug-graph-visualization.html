<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>W</title><script src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script><style>body,html{height:100%;margin:0;overflow:hidden;background-color:#1e1e1e;color:#fff}#mynetwork{width:100%;height:90%}#controls{width:100%;height:10%;display:flex;justify-content:center;align-items:center}#jsonInput{width:70%;height:30px;background-color:#2d2d2d;color:#fff;border:1px solid #555}#updateButton{height:30px;background-color:#3d3d3d;color:#fff;border:none;cursor:pointer}</style></head><body><div id="controls"><textarea id="jsonInput" placeholder="Enter JSON here"></textarea><button id="updateButton">Update Graph</button></div><div id="mynetwork"></div><script>let g={"last_node_id":9,"last_link_id":9,"nodes":[{"id":7,"type":"CLIPTextEncode","pos":[413,389],"size":{"0":425.27801513671875,"1":180.6060791015625},"flags":{},"order":3,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":5}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[6],"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["text, watermark"]},{"id":6,"type":"CLIPTextEncode","pos":[415,186],"size":{"0":422.84503173828125,"1":164.31304931640625},"flags":{},"order":2,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":3}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[4],"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["beautiful scenery nature glass bottle landscape, , purple galaxy bottle,"]},{"id":5,"type":"EmptyLatentImage","pos":[473,609],"size":{"0":315,"1":106},"flags":{},"order":0,"mode":0,"outputs":[{"name":"LATENT","type":"LATENT","links":[2],"slot_index":0}],"properties":{"Node name for S&R":"EmptyLatentImage"},"widgets_values":[512,512,1]},{"id":3,"type":"KSampler","pos":[863,186],"size":{"0":315,"1":262},"flags":{},"order":4,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":1},{"name":"positive","type":"CONDITIONING","link":4},{"name":"negative","type":"CONDITIONING","link":6},{"name":"latent_image","type":"LATENT","link":2}],"outputs":[{"name":"LATENT","type":"LATENT","links":[7],"slot_index":0}],"properties":{"Node name for S&R":"KSampler"},"widgets_values":[156680208700286,"randomize",20,8,"euler","normal",1]},{"id":8,"type":"VAEDecode","pos":[1209,188],"size":{"0":210,"1":46},"flags":{},"order":5,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":7},{"name":"vae","type":"VAE","link":8}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[9],"slot_index":0}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":4,"type":"CheckpointLoaderSimple","pos":[26,474],"size":{"0":315,"1":98},"flags":{},"order":1,"mode":0,"outputs":[{"name":"MODEL","type":"MODEL","links":[1],"slot_index":0},{"name":"CLIP","type":"CLIP","links":[3,5],"slot_index":1},{"name":"VAE","type":"VAE","links":[8],"slot_index":2}],"properties":{"Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["SD1.0\\anime\\RealBackground_v12.safetensors"]},{"id":9,"type":"SaveImage","pos":[1417,407],"size":{"0":210,"1":58},"flags":{},"order":6,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":9}],"properties":{},"widgets_values":["ComfyUI"]}],"links":[[1,4,0,3,0,"MODEL"],[2,5,0,3,3,"LATENT"],[3,4,1,6,0,"CLIP"],[4,6,0,3,1,"CONDITIONING"],[5,4,1,7,0,"CLIP"],[6,7,0,3,2,"CONDITIONING"],[7,3,0,8,0,"LATENT"],[8,4,2,8,1,"VAE"],[9,8,0,9,0,"IMAGE"]]};function l(n){return`&lt;b&gt;${n.id}:${n.type}&lt;/b&gt;`+(n.widgets_values&&n.widgets_values.length?"\n"+n.widgets_values.map(v=>`ãƒ»${v??""}`).join("\n"):"")}function d(n){let t={};return n.forEach(n=>{let e=Math.floor(n.pos[0]/500),o=Math.floor(n.pos[1]/300);t[`${e},${o}`]=t[`${e},${o}`]||[],t[`${e},${o}`].push(n)}),Object.values(t).flatMap((t,e)=>t.map((t,o)=>({...t,pos:[t.pos[0]+o*50,t.pos[1]+e*50]})))}function u(){try{g=JSON.parse(document.getElementById("jsonInput").value);let n=d(g.nodes),t=n.filter(n=>!n.inputs||0===n.inputs.length).map(n=>n.id),e=n.filter(n=>!n.outputs||0===n.outputs.length||n.outputs.every(n=>!n.links||0===n.links.length)).map(n=>n.id);s.clear(),a.clear(),s.add(n.map(n=>({id:n.id,label:l(n),x:n.pos[0],y:n.pos[1],shape:"box",widthConstraint:{minimum:200,maximum:300},margin:12,font:{multi:!0,align:"left",color:"#ffffff",bold:t.includes(n.id)||e.includes(n.id)},color:{background:t.includes(n.id)?"#4169E1":e.includes(n.id)?"#FF6347":"#424242",border:t.includes(n.id)?"#1E90FF":e.includes(n.id)?"#FF4500":"#757575",highlight:{background:t.includes(n.id)?"#6495ED":e.includes(n.id)?"#FF7F50":"#616161",border:t.includes(n.id)?"#4169E1":e.includes(n.id)?"#FF6347":"#9E9E9E"}},size:t.includes(n.id)||e.includes(n.id)?35:30}))),n.forEach(n=>{n.inputs&&n.inputs.forEach(t=>{if(void 0!==t.link){let e=g.nodes.find(n=>n.outputs&&n.outputs.some(n=>n.links&&n.links.includes(t.link)));e&&a.add({from:e.id,to:n.id,label:`${t.name}(${t.type})`,font:{color:"#ffffff",strokeWidth:0,background:"#333333"},arrows:{to:{enabled:!0,scaleFactor:.5}},smooth:{type:"curvedCW",roundness:.2},color:{color:"#9E9E9E",highlight:"#E0E0E0",hover:"#BDBDBD"}})}})}),i.setData({nodes:s,edges:a}),i.stabilize(200)}catch(n){console.error("Invalid JSON:",n)}}let s=new vis.DataSet,a=new vis.DataSet,r=g.nodes.filter(n=>!n.inputs||0===n.inputs.length).map(n=>n.id),o=g.nodes.filter(n=>!n.outputs||0===n.outputs.length||n.outputs.every(n=>!n.links||0===n.links.length)).map(n=>n.id);s.add(d(g.nodes).map(n=>({id:n.id,label:l(n),x:n.pos[0],y:n.pos[1],shape:"box",widthConstraint:{minimum:200,maximum:300},margin:12,font:{multi:!0,align:"left",color:"#ffffff",bold:r.includes(n.id)||o.includes(n.id)},color:{background:r.includes(n.id)?"#4169E1":o.includes(n.id)?"#FF6347":"#424242",border:r.includes(n.id)?"#1E90FF":o.includes(n.id)?"#FF4500":"#757575",highlight:{background:r.includes(n.id)?"#6495ED":o.includes(n.id)?"#FF7F50":"#616161",border:r.includes(n.id)?"#4169E1":o.includes(n.id)?"#FF6347":"#9E9E9E"}},size:r.includes(n.id)||o.includes(n.id)?35:30}))),g.nodes.forEach(n=>{n.inputs&&n.inputs.forEach(t=>{if(void 0!==t.link){let e=g.nodes.find(n=>n.outputs&&n.outputs.some(n=>n.links&&n.links.includes(t.link)));e&&a.add({from:e.id,to:n.id,label:`${t.name}(${t.type})`,font:{color:"#ffffff",strokeWidth:0,background:"#333333"},arrows:{to:{enabled:!0,scaleFactor:.5}},smooth:{type:"curvedCW",roundness:.2},color:{color:"#9E9E9E",highlight:"#E0E0E0",hover:"#BDBDBD"}})}})}),i=new vis.Network(document.getElementById("mynetwork"),{nodes:s,edges:a},{layout:{improvedLayout:!0},physics:{enabled:!0,solver:"forceAtlas2Based",forceAtlas2Based:{gravitationalConstant:-1e3,centralGravity:.005,springLength:200,springConstant:.18,damping:.4,avoidOverlap:1},stabilization:{iterations:300}},interaction:{dragNodes:!0,dragView:!0,zoomView:!0},configure:{enabled:!1}});i.on("stabilizationIterationsDone",function(){i.setOptions({physics:{enabled:!1}}),i.fit()});let c=!1;window.addEventListener("resize",function(){c||(c=!0,requestAnimationFrame(function(){i.fit(),c=!1}))}),document.getElementById("updateButton").addEventListener("click",u);</script></body></html>
