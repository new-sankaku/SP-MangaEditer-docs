<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>規則的トーンブラシ</title><style>body{font:12px Arial;margin:0;padding:5px;background:#f0f0f0}#c{border:1px solid #ccc}#m{display:flex;gap:5px}#r{flex:0 0 auto}label{display:flex;align-items:center;margin:2px 0}select,button,input[type=color]{padding:2px;font-size:12px}input[type=range]{width:100px;margin:0 5px}</style></head><body><div id="m"><canvas id="c" width="600" height="600"></canvas><div id="r"><button id="l">クリア</button><label>種:<select id="t"><option value="dot">点</option><option value="circle">丸</option><option value="cross">十字</option><option value="x">✕</option></select></label><label>サイズ:<input type="range" id="b" min="1" max="50" value="20"><span id="bv">20</span></label><label>トーン:<input type="range" id="s" min="1" max="20" value="4"><span id="sv">4</span></label><label>間隔:<input type="range" id="g" min="0" max="20" value="5"><span id="gv">5</span></label><label>色:<input type="color" id="cl" value="#000000"></label></div></div><script>document.addEventListener("DOMContentLoaded",()=>{const c=document.getElementById("c"),x=c.getContext("2d");let f=!1,g=0,h=0,i=20,j=4,m=5,n="dot",o,p="#000000";function q(a,b,d,z){const r=document.createElement("canvas"),s=a+d,t=Math.ceil(20/s)*s;r.width=r.height=t;const u=r.getContext("2d");u.fillStyle=z;for(let v=0;v<t;v+=s)for(let w=0;w<t;w+=s){switch(b){case"dot":u.fillRect(v+d/2,w+d/2,a,a);break;case"circle":u.beginPath(),u.arc(v+s/2,w+s/2,a/2,0,2*Math.PI),u.fill();break;case"cross":u.fillRect(v+(s-a)/2,w,a,s),u.fillRect(v,w+(s-a)/2,s,a);break;case"x":u.beginPath(),u.moveTo(v,w),u.lineTo(v+s,w+s),u.moveTo(v+s,w),u.lineTo(v,w+s),u.lineWidth=a,u.stroke()}}return x.createPattern(r,"repeat")}function y(a,b,d,e){x.beginPath(),x.moveTo(a,b),x.lineTo(d,e),x.strokeStyle=o,x.lineWidth=i,x.lineCap="round",x.lineJoin="round",x.stroke()}function A(){o=q(j,n,m,p)}c.addEventListener("mousedown",a=>{f=!0,[g,h]=[a.offsetX,a.offsetY]}),c.addEventListener("mousemove",a=>{f&&(y(g,h,a.offsetX,a.offsetY),[g,h]=[a.offsetX,a.offsetY])}),c.addEventListener("mouseup",()=>f=!1),c.addEventListener("mouseout",()=>f=!1),document.getElementById("l").addEventListener("click",()=>x.clearRect(0,0,c.width,c.height)),document.getElementById("t").addEventListener("change",a=>{n=a.target.value,A()}),document.getElementById("cl").addEventListener("input",a=>{p=a.target.value,A()});["b","s","g"].forEach(a=>{const b=document.getElementById(a),d=document.getElementById(a+"v");b.addEventListener("input",e=>{const r=parseInt(e.target.value);d.textContent=r,"b"===a&&(i=r),"s"===a&&(j=r),"g"===a&&(m=r),A()})}),A()});</script></body></html>
