<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>規則的トーンブラシ</title><style>body{font:12px Arial;margin:0;padding:5px;background:#f0f0f0}#c{border:1px solid #ccc}#m{display:flex;gap:5px}#r{flex:0 0 auto}label{display:flex;align-items:center;margin:2px 0}button,input[type=color],select{padding:2px;font-size:12px}input[type=range]{width:100px;margin:0 5px}</style></head><body><div id="m"><canvas id="c" width="600" height="600"></canvas><div id="r"><button id="l">クリア</button><label>種:<select id="t"><option value="dot">点</option><option value="circle">丸</option><option value="cross">十字</option><option value="x">✕</option></select></label><label>サイズ:<input type="range" id="b" min="1" max="50" value="20"><span id="bv">20</span></label><label>トーン:<input type="range" id="s" min="1" max="20" value="4"><span id="sv">4</span></label><label>間隔:<input type="range" id="g" min="0" max="20" value="5"><span id="gv">5</span></label><label>色:<input type="color" id="cl" value="#000000"></label></div></div><script>document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("c"),t=e.getContext("2d");let n,o=!1,d=0,a=0,c=20,i=4,l=5,s="dot",r="#000000";function u(){n=function(e,n,o,d){const a=document.createElement("canvas"),c=e+o,i=Math.ceil(20/c)*c;a.width=a.height=i;const l=a.getContext("2d");l.fillStyle=d;for(let t=0;t<i;t+=c)for(let d=0;d<i;d+=c)switch(n){case"dot":l.fillRect(t+o/2,d+o/2,e,e);break;case"circle":l.beginPath(),l.arc(t+c/2,d+c/2,e/2,0,2*Math.PI),l.fill();break;case"cross":l.fillRect(t+(c-e)/2,d,e,c),l.fillRect(t,d+(c-e)/2,c,e);break;case"x":l.beginPath(),l.moveTo(t,d),l.lineTo(t+c,d+c),l.moveTo(t+c,d),l.lineTo(t,d+c),l.lineWidth=e,l.stroke()}return t.createPattern(a,"repeat")}(i,s,l,r)}e.addEventListener("mousedown",(e=>{o=!0,[d,a]=[e.offsetX,e.offsetY]})),e.addEventListener("mousemove",(e=>{o&&(function(e,o,d,a){t.beginPath(),t.moveTo(e,o),t.lineTo(d,a),t.strokeStyle=n,t.lineWidth=c,t.lineCap="round",t.lineJoin="round",t.stroke()}(d,a,e.offsetX,e.offsetY),[d,a]=[e.offsetX,e.offsetY])})),e.addEventListener("mouseup",(()=>o=!1)),e.addEventListener("mouseout",(()=>o=!1)),document.getElementById("l").addEventListener("click",(()=>t.clearRect(0,0,e.width,e.height))),document.getElementById("t").addEventListener("change",(e=>{s=e.target.value,u()})),document.getElementById("cl").addEventListener("input",(e=>{r=e.target.value,u()})),["b","s","g"].forEach((e=>{const t=document.getElementById(e),n=document.getElementById(e+"v");t.addEventListener("input",(t=>{const o=parseInt(t.target.value);n.textContent=o,"b"===e&&(c=o),"s"===e&&(i=o),"g"===e&&(l=o),u()}))})),u()}))</script></body></html>