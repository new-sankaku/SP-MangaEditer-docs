<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>高機能漫画トーンジェネレーター（色選択機能付き）</title><script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.1/fabric.min.js"></script><style>body{font-family:Arial,sans-serif;display:flex;flex-direction:column;align-items:center;padding:20px}#controls{margin-bottom:20px;display:flex;flex-wrap:wrap;justify-content:center;gap:20px}.control-group{display:flex;flex-direction:column;align-items:flex-start}label{margin-right:10px}input,select{margin-bottom:10px}#canvas-container{border:1px solid #ccc}.value-display{font-size:.9em;color:#666}</style></head><body><h1>高機能漫画トーンジェネレーター（色選択機能付き）</h1><div id="controls"><div class="control-group"><label for="dotSize">ドットサイズ: <span id="dotSizeValue" class="value-display">10</span></label> <input type="range" id="dotSize" min="1" max="50" value="10"></div><div class="control-group"><label for="dotSpacing">ドット間隔: <span id="dotSpacingValue" class="value-display">5</span></label> <input type="range" id="dotSpacing" min="1" max="100" value="5"></div><div class="control-group"><label for="dotShape">ドット形状:</label> <select id="dotShape"><option value="circle">円形</option><option value="square">四角形</option><option value="triangle">三角形</option><option value="star">星形</option><option value="cross">十字</option><option value="heart">ハート</option><option value="lightning">稲妻</option></select></div><div class="control-group"><label for="fillColor">塗りつぶし色:</label> <input type="color" id="fillColor" value="#000000"></div><div class="control-group"><label for="gradientEnabled">グラデーション:</label> <input type="checkbox" id="gradientEnabled" checked="checked"></div><div class="control-group"><label for="gradientDirection">グラデーション方向:</label> <select id="gradientDirection"><option value="top-bottom">上から下</option><option value="bottom-top">下から上</option><option value="left-right">左から右</option><option value="right-left">右から左</option></select></div><div class="control-group"><label for="gradientStart">グラデーション開始位置 (%):</label> <input type="number" id="gradientStart" min="0" max="100" value="0"></div><div class="control-group"><label for="gradientEnd">グラデーション終了位置 (%):</label> <input type="number" id="gradientEnd" min="0" max="100" value="100"></div><button id="generate">生成</button></div><div id="canvas-container"><canvas id="canvas" width="500" height="500"></canvas></div><script>const canvas=new fabric.Canvas("canvas"),dotSizeInput=document.getElementById("dotSize"),dotSpacingInput=document.getElementById("dotSpacing"),dotShapeSelect=document.getElementById("dotShape"),fillColorInput=document.getElementById("fillColor"),gradientEnabledCheckbox=document.getElementById("gradientEnabled"),gradientDirectionSelect=document.getElementById("gradientDirection"),gradientStartInput=document.getElementById("gradientStart"),gradientEndInput=document.getElementById("gradientEnd"),generateButton=document.getElementById("generate"),dotSizeValue=document.getElementById("dotSizeValue"),dotSpacingValue=document.getElementById("dotSpacingValue");function updateValueDisplay(){dotSizeValue.textContent=dotSizeInput.value,dotSpacingValue.textContent=dotSpacingInput.value}function createShape(e,t,a,n,l,c){let i;const o=fabric.Color.fromHex(l);o.setAlpha(c);const r=o.toRgba();switch(n){case"circle":i=new fabric.Circle({radius:a/2,fill:r});break;case"square":i=new fabric.Rect({width:a,height:a,fill:r});break;case"triangle":i=new fabric.Triangle({width:a,height:a,fill:r});break;case"star":const e=[{x:0,y:-50},{x:14,y:-20},{x:47,y:-15},{x:23,y:7},{x:29,y:40},{x:0,y:25},{x:-29,y:40},{x:-23,y:7},{x:-47,y:-15},{x:-14,y:-20}];i=new fabric.Polygon(e,{fill:r,scaleX:a/100,scaleY:a/100});break;case"cross":const t="M 25,10 H 40 V 25 H 55 V 40 H 40 V 55 H 25 V 40 H 10 V 25 H 25 Z";i=new fabric.Path(t,{fill:r,scaleX:a/65,scaleY:a/65});break;case"heart":const n="M 25,40 A 20,20 0,0,1 65,40 A 20,20 0,0,1 105,40 Q 105,80 65,120 Q 25,80 25,40 Z";i=new fabric.Path(n,{fill:r,scaleX:a/130,scaleY:a/130});break;case"lightning":const l="M 25,0 L 0,50 L 25,45 L 5,100 L 50,55 L 30,60 Z";i=new fabric.Path(l,{fill:r,scaleX:a/50,scaleY:a/100})}return i.set({left:e,top:t,selectable:!1,originX:"center",originY:"center"}),i}function generateTone(){canvas.clear();const e=parseInt(dotSizeInput.value),t=parseInt(dotSpacingInput.value),a=dotShapeSelect.value,n=fillColorInput.value,l=gradientEnabledCheckbox.checked,c=gradientDirectionSelect.value,i=parseInt(gradientStartInput.value)/100,o=parseInt(gradientEndInput.value)/100,r=500,d=e+t;for(let t=0;t<r+d;t+=d)for(let u=0;u<r+d;u+=d){let d=1;if(l){let e;switch(c){case"top-bottom":e=t/r;break;case"bottom-top":e=1-t/r;break;case"left-right":e=u/r;break;case"right-left":e=1-u/r}d=(e-i)/(o-i),d=Math.max(0,Math.min(1,d))}const s=createShape(u,t,e,a,n,d);canvas.add(s)}canvas.renderAll()}dotSizeInput.addEventListener("input",updateValueDisplay),dotSpacingInput.addEventListener("input",updateValueDisplay),generateButton.addEventListener("click",generateTone),generateTone(),updateValueDisplay()</script></body></html>