<!DOCTYPE html><html><head><script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.2.4/fabric.min.js"></script></head><body><canvas id="c" width="600" height="400"></canvas><button id="drawing-mode">Enter drawing mode</button><div id="drawing-mode-options" style="display:block"><label for="drawing-color">Color:</label> <input type="color" id="drawing-color"> <label for="drawing-shadow-color">Shadow Color:</label> <input type="color" id="drawing-shadow-color"> <label for="drawing-line-width">Line Width:</label> <input type="range" id="drawing-line-width" min="1" max="50"> <span id="drawing-line-width-value">1</span><br><label for="drawing-shadow-width">Shadow Width:</label> <input type="range" id="drawing-shadow-width" min="0" max="50"> <span id="drawing-shadow-width-value">0</span><br><label for="drawing-shadow-offset">Shadow Offset:</label> <input type="range" id="drawing-shadow-offset" min="0" max="50"> <span id="drawing-shadow-offset-value">0</span><br><button id="clear-canvas">Clear</button></div><select id="drawing-mode-selector"><option value="Pencil">Pencil</option><option value="hline">Horizontal Line</option><option value="vline">Vertical Line</option><option value="square">Square</option><option value="diamond">Diamond</option><option value="texture">Texture</option></select><script>document.addEventListener("DOMContentLoaded",(function(){var e=new fabric.Canvas("c",{isDrawingMode:!1});fabric.Object.prototype.transparentCorners=!1;var t=document.getElementById("drawing-mode"),r=(document.getElementById("drawing-mode-options"),document.getElementById("drawing-color")),n=document.getElementById("drawing-shadow-color"),a=document.getElementById("drawing-line-width"),i=document.getElementById("drawing-shadow-width"),o=document.getElementById("drawing-shadow-offset"),c=document.getElementById("clear-canvas"),s=document.getElementById("drawing-line-width-value"),u=document.getElementById("drawing-shadow-width-value"),h=document.getElementById("drawing-shadow-offset-value");if(c.onclick=function(){e.clear()},t.onclick=function(){e.isDrawingMode=!e.isDrawingMode,e.isDrawingMode?t.innerHTML="Cancel drawing mode":t.innerHTML="Enter drawing mode"},fabric.PatternBrush){var d=new fabric.PatternBrush(e);d.getPatternSrc=function(){var e=fabric.document.createElement("canvas");e.width=e.height=10;var t=e.getContext("2d");return t.strokeStyle=this.color,t.lineWidth=5,t.beginPath(),t.moveTo(0,5),t.lineTo(10,5),t.closePath(),t.stroke(),e};var l=new fabric.PatternBrush(e);l.getPatternSrc=function(){var e=fabric.document.createElement("canvas");e.width=e.height=10;var t=e.getContext("2d");return t.strokeStyle=this.color,t.lineWidth=5,t.beginPath(),t.moveTo(5,0),t.lineTo(5,10),t.closePath(),t.stroke(),e};var g=new fabric.PatternBrush(e);g.getPatternSrc=function(){var e=fabric.document.createElement("canvas");e.width=e.height=12;var t=e.getContext("2d");return t.fillStyle=this.color,t.fillRect(0,0,10,10),e};var f=new fabric.PatternBrush(e);f.getPatternSrc=function(){var e=fabric.document.createElement("canvas"),t=new fabric.Rect({width:10,height:10,angle:45,fill:this.color}),r=t.getBoundingRect().width;e.width=e.height=r+5,t.set({left:r/2,top:r/2});var n=e.getContext("2d");return t.render(n),e};new Image;var w=new fabric.PatternBrush(e)}document.getElementById("drawing-mode-selector").onchange=function(){if("hline"===this.value?e.freeDrawingBrush=d:"vline"===this.value?e.freeDrawingBrush=l:"square"===this.value?e.freeDrawingBrush=g:"diamond"===this.value?e.freeDrawingBrush=f:"texture"===this.value?e.freeDrawingBrush=w:e.freeDrawingBrush=new fabric[this.value+"Brush"](e),e.freeDrawingBrush){var t=e.freeDrawingBrush;t.color=r.value,t.getPatternSrc&&(t.source=t.getPatternSrc.call(t)),t.width=parseInt(a.value,10)||1,t.shadow=new fabric.Shadow({blur:parseInt(i.value,10)||0,offsetX:0,offsetY:0,affectStroke:!0,color:n.value})}},r.onchange=function(){var t=e.freeDrawingBrush;t.color=this.value,t.getPatternSrc&&(t.source=t.getPatternSrc.call(t))},n.onchange=function(){e.freeDrawingBrush.shadow.color=this.value},a.onchange=function(){var t=parseInt(this.value,10)||1;e.freeDrawingBrush.width=t,s.textContent=t},i.onchange=function(){var t=parseInt(this.value,10)||0;e.freeDrawingBrush.shadow.blur=t,u.textContent=t},o.onchange=function(){var t=parseInt(this.value,10)||0;e.freeDrawingBrush.shadow.offsetX=t,e.freeDrawingBrush.shadow.offsetY=t,h.textContent=t},e.freeDrawingBrush&&(e.freeDrawingBrush.color=r.value,e.freeDrawingBrush.getPatternSrc&&(e.freeDrawingBrush.source=e.freeDrawingBrush.getPatternSrc.call(e.freeDrawingBrush)),e.freeDrawingBrush.width=parseInt(a.value,10)||1,e.freeDrawingBrush.shadow=new fabric.Shadow({blur:parseInt(i.value,10)||0,offsetX:0,offsetY:0,affectStroke:!0,color:n.value}))}))</script></body></html>