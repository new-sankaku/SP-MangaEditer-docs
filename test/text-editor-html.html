<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>改良版テキストエディター</title><script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script><style>body{font-family:Arial,sans-serif;display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:100vh;margin:0;background-color:#f0f0f0}.container{max-width:900px;width:100%;margin-bottom:20px}textarea{width:100%;height:150px;margin-bottom:15px;padding:5px;border:1px solid #ccc;font-size:24px;white-space:pre-wrap;word-wrap:break-word}#output{display:inline-block;white-space:pre;padding:0;margin-bottom:20px;border:2px dashed #000;font-size:24px;line-height:1.2;transform-origin:top left}.controls{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:20px}.control-group{display:flex;align-items:center;margin-bottom:5px}label{margin-right:5px;font-size:12px}button{padding:5px 10px;cursor:pointer;margin-right:5px;margin-bottom:5px;font-size:12px}input[type=color],input[type=number],input[type=range]{margin-right:5px;font-size:12px}input[type=number]{width:50px}select{font-size:12px}.info{margin-top:20px;padding:10px;border:1px solid #ccc;background-color:#fff;width:100%;font-size:14px;white-space:pre-wrap;word-wrap:break-word}</style></head><body><div class="container"><textarea id="input">New Text. あいうえお。
Second line. かきくけこ。
Third line. さしすせそ。</textarea><div id="output"></div><div class="controls"><div><div class="control-group"><button id="bold">B</button> <button id="italic">I</button> <button id="underline">U</button></div><div class="control-group"><label for="fontSize">サイズ:</label> <input type="number" id="fontSize" value="40" min="1" max="100"></div><div class="control-group"><label for="textColor">色:</label> <input type="color" id="textColor" value="#000000"></div><div class="control-group"><label for="outlineWidth">輪郭幅:</label> <input type="number" id="outlineWidth" value="0" min="0" max="10"></div><div class="control-group"><label for="outlineColor">輪郭色:</label> <input type="color" id="outlineColor" value="#FF0000"></div></div><div><div class="control-group"><label for="letterSpacing">文字間隔:</label> <input type="number" id="letterSpacing" value="0" min="-5" max="20"></div><div class="control-group"><label for="lineHeight">行高:</label> <input type="number" id="lineHeight" value="1.2" min="0.5" max="3" step="0.1"></div><div class="control-group"><label>位置:</label> <button id="alignLeft">左</button> <button id="alignCenter">中</button> <button id="alignRight">右</button></div><div class="control-group"><label for="shadowColor">シャドウ色:</label> <input type="color" id="shadowColor" value="#808080"></div><div class="control-group"><label for="shadowOffsetX">シャドウX:</label> <input type="number" id="shadowOffsetX" value="0" min="-50" max="50"></div><div class="control-group"><label for="shadowOffsetY">シャドウY:</label> <input type="number" id="shadowOffsetY" value="0" min="-50" max="50"></div><div class="control-group"><label for="shadowBlur">シャドウブラー:</label> <input type="number" id="shadowBlur" value="0" min="0" max="50"></div></div><div><div class="control-group"><label for="bgColorStart">背景開始色:</label> <input type="color" id="bgColorStart" value="#FF3D00"></div><div class="control-group"><label for="bgColorEnd">背景終了色:</label> <input type="color" id="bgColorEnd" value="#0091EA"></div><div class="control-group"><label for="angle">角度:</label> <input type="range" id="angle" value="45" min="0" max="360"> <span id="angleValue">45deg</span></div><div class="control-group"><label for="startPos">開始位置:</label> <input type="range" id="startPos" value="0" min="0" max="100"> <span id="startPosValue">0%</span></div><div class="control-group"><label for="middlePos">中間位置:</label> <input type="range" id="middlePos" value="50" min="0" max="100"> <span id="middlePosValue">50%</span></div><div class="control-group"><label for="endPos">終了位置:</label> <input type="range" id="endPos" value="100" min="0" max="100"> <span id="endPosValue">100%</span></div><div class="control-group"><label for="repeatInterval">繰り返し間隔 (px):</label> <input type="number" id="repeatInterval" value="100" min="1" max="1000"></div><div class="control-group"><label for="gradientType">グラデーションタイプ:</label> <label><input type="radio" name="gradientType" value="none" checked="checked"> 無し</label> <label><input type="radio" name="gradientType" value="linear"> Linear</label> <label><input type="radio" name="gradientType" value="repeating"> Repeating</label></div><div class="control-group"><label><input type="checkbox" id="textClip"> テキストクリップを有効にする</label></div><div class="control-group"><label><input type="checkbox" id="setTransparent"> 透明色を設定</label></div><div class="control-group"><button id="download">画像保存</button></div></div></div></div><div id="info" class="info"></div><script>const input=document.getElementById("input"),output=document.getElementById("output"),controls=document.querySelectorAll("button, input, select"),downloadBtn=document.getElementById("download"),gradientTypeInputs=document.querySelectorAll('input[name="gradientType"]'),textClipCheckbox=document.getElementById("textClip"),setTransparentCheckbox=document.getElementById("setTransparent"),repeatIntervalInput=document.getElementById("repeatInterval"),info=document.getElementById("info");let isBold=!1,isItalic=!1,isUnderline=!1;function updateOutput(){let t=input.value;t=t.replace(/\n/g,"<br>"),output.innerHTML=t,applyStyles(),updateInfo()}function applyStyles(){const t={fontWeight:isBold?"bold":"normal",fontStyle:isItalic?"italic":"normal",textDecoration:isUnderline?"underline":"none",fontSize:`${document.getElementById("fontSize").value}px`,letterSpacing:`${document.getElementById("letterSpacing").value}px`,lineHeight:document.getElementById("lineHeight").value,textAlign:output.style.textAlign,padding:"0",margin:"0"},e=`${document.getElementById("shadowOffsetX").value}px ${document.getElementById("shadowOffsetY").value}px ${document.getElementById("shadowBlur").value}px ${document.getElementById("shadowColor").value}`,n=parseInt(document.getElementById("outlineWidth").value),l=document.getElementById("outlineColor").value;if(n>0){let t=`${e}, `;for(let e=0;e<360;e+=45){t+=`${Math.round(Math.cos(e*Math.PI/180)*n)}px ${Math.round(Math.sin(e*Math.PI/180)*n)}px 0 ${l}, `}output.style.textShadow=t.slice(0,-2)}else output.style.textShadow=e;Object.assign(output.style,t);const u=document.getElementById("bgColorStart").value,o=document.getElementById("bgColorEnd").value,d=document.getElementById("angle").value,a=document.getElementById("startPos").value,i=document.getElementById("middlePos").value,r=document.getElementById("endPos").value,c=parseInt(repeatIntervalInput.value),p=document.querySelector('input[name="gradientType"]:checked').value;output.style.background="linear"===p?`linear-gradient(${d}deg, ${u} ${a}%, ${o} ${i}%, ${u} ${r}%)`:"repeating"===p?`repeating-linear-gradient(${d}deg, ${u} ${a}%, ${o} ${i}%, ${u} ${c}px)`:"",textClipCheckbox.checked?(output.style.color="transparent",output.style.webkitBackgroundClip="text",output.style.backgroundClip="text"):setTransparentCheckbox.checked?(output.style.color="transparent",output.style.webkitBackgroundClip="",output.style.backgroundClip=""):(output.style.color=document.getElementById("textColor").value,output.style.webkitBackgroundClip="",output.style.backgroundClip=""),document.getElementById("angleValue").innerText=`${d}deg`,document.getElementById("startPosValue").innerText=`${a}%`,document.getElementById("middlePosValue").innerText=`${i}%`,document.getElementById("endPosValue").innerText=`${r}%`}function updateInfo(){const t=window.getComputedStyle(output);let e="現在のCSS設定:\n";e+=`font-weight: ${t.fontWeight};\n`,e+=`font-style: ${t.fontStyle};\n`,e+=`text-decoration: ${t.textDecoration};\n`,e+=`font-size: ${t.fontSize};\n`,e+=`letter-spacing: ${t.letterSpacing};\n`,e+=`line-height: ${t.lineHeight};\n`,e+=`text-align: ${t.textAlign};\n`,e+=`color: ${t.color};\n`,e+=`text-shadow: ${t.textShadow};\n`,e+=`background: ${t.background};\n`,e+=`-webkit-background-clip: ${t.webkitBackgroundClip};\n`,e+=`background-clip: ${t.backgroundClip};\n`,info.textContent=e}controls.forEach((t=>{["bold","italic","underline"].includes(t.id)?t.addEventListener("click",(t=>{switch(t.target.id){case"bold":isBold=!isBold;break;case"italic":isItalic=!isItalic;break;case"underline":isUnderline=!isUnderline}updateOutput()})):t.addEventListener("input",updateOutput)})),gradientTypeInputs.forEach((t=>{t.addEventListener("change",updateOutput)})),textClipCheckbox.addEventListener("change",updateOutput),setTransparentCheckbox.addEventListener("change",updateOutput),repeatIntervalInput.addEventListener("input",updateOutput),input.addEventListener("input",updateOutput),document.getElementById("alignLeft").addEventListener("click",(()=>{output.style.textAlign="left",updateOutput()})),document.getElementById("alignCenter").addEventListener("click",(()=>{output.style.textAlign="center",updateOutput()})),document.getElementById("alignRight").addEventListener("click",(()=>{output.style.textAlign="right",updateOutput()})),downloadBtn.addEventListener("click",(()=>{const t=output.style.border,e=output.style.backgroundColor;output.style.border="none",output.style.backgroundColor="transparent",html2canvas(output,{backgroundColor:null}).then((n=>{const l=document.createElement("a");l.download="text_image.png",l.href=n.toDataURL("image/png"),l.click(),output.style.border=t,output.style.backgroundColor=e}))})),updateOutput()</script></body></html>