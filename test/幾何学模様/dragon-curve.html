<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>ドラゴン曲線のバリエーション - Canvas API</title><style>body{margin:0;display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;background:#f0f0f0}#controls{margin-bottom:20px;display:flex;flex-wrap:wrap;justify-content:center}#controls>div{margin:0 10px}label{display:inline-block;width:120px}</style></head><body><div id="controls"><div><label for="iterations">繰り返し回数:</label> <input type="range" id="iterations" min="0" max="20" value="10" step="1"> <span id="iterationsValue">10</span></div><div><label for="curveType">曲線タイプ:</label> <select id="curveType"><option value="dragon">通常のドラゴン曲線</option><option value="twinDragon">双子ドラゴン曲線</option><option value="terDragon">三倍ドラゴン曲線</option><option value="levy">レヴィ曲線</option></select></div><div><button id="redraw">再描画</button></div></div><canvas id="canvas" width="800" height="800"></canvas><script>const canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d"),redrawBtn=document.getElementById("redraw"),iterationsSlider=document.getElementById("iterations"),iterationsValue=document.getElementById("iterationsValue"),curveTypeSelect=document.getElementById("curveType");function generateDragonCurvePoints(e,t){let a=[{x:0,y:0},{x:1,y:0}];for(let n=0;n<e;n++){const e=[],n=a[a.length-1],r=(a[0].x+n.x)/2,c=(a[0].y+n.y)/2;for(let n=0;n<a.length;n++){const i=a[n];let o,s;switch(t){case"dragon":o=r+(i.y-c),s=c-(i.x-r);break;case"twinDragon":o=r+(i.y-c)*Math.SQRT1_2,s=c-(i.x-r)*Math.SQRT1_2;break;case"terDragon":o=r+(i.y-c)*Math.sqrt(3)/2,s=c-(i.x-r)*Math.sqrt(3)/2;break;case"levy":o=r+(i.y-c)/Math.SQRT2,s=c-(i.x-r)/Math.SQRT2}e.push({x:o,y:s})}a="terDragon"===t?[...a,...e]:[...a,...e.reverse()]}return a}function drawCurve(e){const t=canvas.width,a=canvas.height,n=Math.min(...e.map((e=>e.x))),r=Math.max(...e.map((e=>e.x))),c=Math.min(...e.map((e=>e.y))),i=Math.max(...e.map((e=>e.y))),o=Math.min(.8*t/(r-n),.8*a/(i-c)),s=(t-(r+n)*o)/2,d=(a-(i+c)*o)/2;ctx.beginPath(),ctx.moveTo(e[0].x*o+s,e[0].y*o+d);for(let t=1;t<e.length;t++)ctx.lineTo(e[t].x*o+s,e[t].y*o+d);ctx.stroke()}function redraw(){ctx.clearRect(0,0,canvas.width,canvas.height);const e=parseInt(iterationsSlider.value),t=curveTypeSelect.value;ctx.strokeStyle=`hsl(${360*Math.random()}, 70%, 50%)`,ctx.lineWidth=2;drawCurve(generateDragonCurvePoints(e,t))}redrawBtn.addEventListener("click",redraw),iterationsSlider.addEventListener("input",(()=>{iterationsValue.textContent=iterationsSlider.value,redraw()})),curveTypeSelect.addEventListener("change",redraw),redraw()</script></body></html>