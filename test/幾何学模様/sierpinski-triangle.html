<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>シェルピンスキーの三角形 - Canvas API</title><style>body{margin:0;display:flex;justify-content:center;align-items:center;height:100vh;background:#f0f0f0}#controls{position:absolute;top:10px;left:10px}</style></head><body><div id="controls"><button id="redraw">再描画</button> <input type="range" id="iterations" min="0" max="8" value="6" step="1"> <span id="iterationsValue">6</span></div><canvas id="canvas" width="800" height="800"></canvas><script>const canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d"),redrawBtn=document.getElementById("redraw"),iterationsSlider=document.getElementById("iterations"),iterationsValue=document.getElementById("iterationsValue");function drawTriangle(e,t,n,a,i,r){ctx.beginPath(),ctx.moveTo(e,t),ctx.lineTo(n,a),ctx.lineTo(i,r),ctx.closePath(),ctx.stroke()}function drawSierpinskiTriangle(e,t,n,a,i,r,d){if(0===d)drawTriangle(e,t,n,a,i,r);else{const s=(e+n)/2,c=(t+a)/2,o=(n+i)/2,l=(a+r)/2,w=(i+e)/2,g=(r+t)/2;drawSierpinskiTriangle(e,t,s,c,w,g,d-1),drawSierpinskiTriangle(s,c,n,a,o,l,d-1),drawSierpinskiTriangle(w,g,o,l,i,r,d-1)}}function redraw(){ctx.clearRect(0,0,canvas.width,canvas.height);const e=parseInt(iterationsSlider.value);ctx.strokeStyle=`hsl(${360*Math.random()}, 50%, 50%)`;const t=.8*Math.min(canvas.width,canvas.height),n=canvas.width/2,a=canvas.height/2,i=t*Math.sqrt(3)/2;drawSierpinskiTriangle(n,a-i/2,n-t/2,a+i/2,n+t/2,a+i/2,e)}redrawBtn.addEventListener("click",redraw),iterationsSlider.addEventListener("input",(()=>{iterationsValue.textContent=iterationsSlider.value,redraw()})),redraw()</script></body></html>